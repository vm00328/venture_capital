<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolios Result</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            function sortTable(tableId, columnIndex) {
                var table = $("#" + tableId);
                var rows = table.find('tr').get();
                rows.sort(function (a, b) {
                    var A = parseFloat($(a).children('td').eq(columnIndex).text());
                    var B = parseFloat($(b).children('td').eq(columnIndex).text());
                    return B - A;
                });
                $.each(rows, function (index, row) {
                    table.children('tbody').append(row);
                });
            }
    
            // Call the function to sort the tables by the return-to-risk ratio column
            sortTable("optimal-portfolio-table", 4);
            sortTable("simulated-portfolios-table", 4);
        });
    </script>    
</head>
<body>
    <h2>Optimal Portfolio Information</h2>
    <table id = "optimal-portfolio-table" border = "1">
        <tr>
            <th>Portfolio Selector</th>
            <th>Venture Capital Funds</th>
            <th>Portfolio Return</th>
            <th>Portfolio Risk</th>
            <th>Return-to-Risk Ratio</th>
        </tr>
        <tr>
            <td><input type="checkbox" name="selected_portfolios" value="{{ optimal_portfolio.Assets }}"></td>
            <td>{{ optimal_portfolio.Assets if optimal_portfolio is defined else '' }}</td>
            <td>{{ optimal_portfolio.Return if optimal_portfolio is defined else '' }}</td>
            <td>{{ optimal_portfolio.Risk if optimal_portfolio is defined else '' }}</td>
            <td>{{ optimal_portfolio["Return-to-Risk Ratio"] | round(2) if optimal_portfolio is defined else '' }}</td>
        </tr>
    </table>
    
    <h2>Simulated Portfolios (based on the input criteria)</h2>
    <table id = "simulated-portfolios-table" border = "1">
        <tr>
            <th>Portfolio Selector</th>
            <th>Venture Capital Funds</th>
            <th>Portfolio Return</th>
            <th>Portfolio Risk</th>
            <th>Return-to-Risk Ratio</th>
        </tr>
        {% for portfolio in result.filtered_portfolios %}
            <tr>
                <td><input type="checkbox" name="selected_portfolios" value="{{ portfolio.Assets }}"></td>
                <td>{{ portfolio.Assets }}</td>
                <td>{{ portfolio.Return | round(2) }}</td>
                <td>{{ portfolio.Risk | round(2) }}</td>
                <td>{{ portfolio["Return-to-Risk Ratio"] | round(2) }}</td>
            </tr>
        {% endfor %}
    </table>
    <input type="submit" value="Store Portfolio Selection">

</body>
</html>